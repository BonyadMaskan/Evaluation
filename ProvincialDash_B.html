<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ğŸ† Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§ - Ø±ÛŒØ§Ø³Øª Ø¨Ù†ÛŒØ§Ø¯ Ù…Ø³Ú©Ù†</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>

  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700;800&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Vazirmatn', Tahoma, sans-serif;
      background: linear-gradient(180deg, #f8fafc 0%, #eef2ff 100%);
      color: #0f172a;
    }

    .card {
      background: white;
      border-radius: 18px;
      border: 1px solid #e2e8f0;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
      padding: 24px;
      transition: all 0.3s ease;
    }

    .card:hover {
      box-shadow: 0 6px 20px rgba(56, 189, 248, 0.25);
      transform: translateY(-3px);
    }

    .chart-container { position: relative; height: 350px; }
    .chart-container-small { position: relative; height: 280px; }

    .progress-bar-container {
      background: #e2e8f0;
      border-radius: 999px;
      height: 8px;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      border-radius: 999px;
      transition: width 0.5s ease;
    }

    @media (max-width:1024px) {
      .grid-provs { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width:640px) {
      .grid-provs { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body class="p-6">

  <div class="max-w-7xl mx-auto space-y-8">
    <!-- Header -->
    <header class="bg-gradient-to-l from-sky-700 to-sky-500 text-white p-6 rounded-2xl shadow-lg flex flex-col sm:flex-row justify-between items-center gap-6">
      <div class="flex items-center gap-4">
        <div class="bg-white/20 p-3 rounded-xl">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-6h6v6h5V9H4v8h5z" />
          </svg>
        </div>
        <div>
          <h1 class="text-2xl font-extrabold">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§</h1>
          <p class="text-sky-100 text-sm mt-1">Ù¾Ø§ÛŒØ´ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ù†ÛŒØ§Ø¯ Ù…Ø³Ú©Ù† Ø¯Ø± Ø³Ø±Ø§Ø³Ø± Ú©Ø´ÙˆØ± â€” ÙˆÛŒÚ˜Ù‡ Ø±ÛŒØ§Ø³Øª</p>
        </div>
      </div>
      <div class="flex gap-3">
        <select id="period" class="bg-white text-slate-800 px-4 py-2 rounded-lg border border-sky-600 focus:ring-2 focus:ring-sky-300">
          <option>ÙØµÙ„ Ø³ÙˆÙ… Û±Û´Û°Û´</option>
          <option>ÙØµÙ„ Ø¯ÙˆÙ… Û±Û´Û°Û´</option>
        </select>
        <button id="refreshBtn" class="bg-sky-600 hover:bg-sky-700 text-white px-4 py-2 rounded-lg font-bold transition">ğŸ”„ Ø¨Ø§Ø²Ø®ÙˆØ§Ù†ÛŒ</button>
      </div>
    </header>

    <!-- KPI Cards -->
    <section class="grid grid-cols-12 gap-6">
      <div class="col-span-12 lg:col-span-8 grid grid-cols-3 gap-6">
        <div class="card text-center">
          <div class="text-4xl mb-2 text-sky-600">ğŸŒ</div>
          <div class="text-sm text-slate-500">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø¹Ù…Ù„Ú©Ø±Ø¯ Ú©Ø´ÙˆØ±</div>
          <div id="avgScore" class="text-3xl font-extrabold text-sky-700">--</div>
        </div>
        <div class="card text-center">
          <div class="text-4xl mb-2 text-amber-600">âš ï¸</div>
          <div class="text-sm text-slate-500">Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ ÙˆØ¶Ø¹ÛŒØª Ù‡Ø´Ø¯Ø§Ø±</div>
          <div id="warningCount" class="text-3xl font-extrabold text-amber-700">--</div>
        </div>
        <div class="card text-center">
          <div class="text-4xl mb-2 text-emerald-600">ğŸ¥‡</div>
          <div class="text-sm text-slate-500">Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø±ØªØ±</div>
          <div id="topCount" class="text-3xl font-extrabold text-emerald-700">--</div>
        </div>
      </div>

      <aside class="col-span-12 lg:col-span-4 card">
        <h4 class="font-bold text-lg mb-3 text-red-600 flex items-center gap-2">ğŸš¨ Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ</h4>
        <ol id="quickAlerts" class="text-sm space-y-2 list-disc pr-5"></ol>
      </aside>
    </section>

    <!-- Charts -->
    <section class="grid grid-cols-12 gap-6">
      <div class="col-span-12 lg:col-span-7 card">
        <h3 class="font-bold text-xl mb-3 text-slate-800">Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</h3>
        <select id="projectSelect" class="border rounded-lg p-2 mb-3 text-sm">
          <option>Ù†Ù‡Ø¶Øª Ù…Ù„ÛŒ Ù…Ø³Ú©Ù†</option>
          <option>Ø¨Ø§Ø²Ø³Ø§Ø²ÛŒ Ùˆ Ø¨Ù‡Ø³Ø§Ø²ÛŒ</option>
          <option>Ø¹Ù…Ø±Ø§Ù† Ø±ÙˆØ³ØªØ§ÛŒÛŒ</option>
          <option>ØªÙˆØ³Ø¹Ù‡ Ù…Ø³Ú©Ù† Ø´Ù‡Ø±ÛŒ</option>
        </select>
        <div class="chart-container">
          <canvas id="barChart"></canvas>
        </div>
      </div>

      <div class="col-span-12 lg:col-span-5 card">
        <h3 class="font-bold text-xl mb-3 text-slate-800">Ø±ÙˆÙ†Ø¯ ØªØ£Ø®ÛŒØ± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</h3>
        <div class="chart-container-small">
          <canvas id="delayChart"></canvas>
        </div>
      </div>
    </section>

    <!-- Province Cards -->
    <section>
      <h2 class="text-xl font-bold mb-4 text-slate-800">ğŸ“¦ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ ØªÙØµÛŒÙ„ÛŒ Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§</h2>
      <div id="provinceCards" class="grid grid-cols-3 gap-6 grid-provs"></div>
    </section>

    <!-- Footer -->
    <footer class="text-center text-slate-500 border-t pt-4 text-xs">
      Ø·Ø±Ø§Ø­ÛŒ Ùˆ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ: Ø³Ø§Ø²Ù…Ø§Ù† ØªÙˆØ³Ø¹Ù‡ Ù…Ø³Ú©Ù† Ø§ÛŒØ±Ø§Ù† â€” Û±Û´Û°Û´
    </footer>
  </div>

  <script>
    Chart.register(ChartDataLabels);

    const chartColors = ['#0ea5e9', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#06b6d4'];
    const provinces = ['ØªÙ‡Ø±Ø§Ù†', 'Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒ', 'ÙØ§Ø±Ø³', 'Ø§ØµÙÙ‡Ø§Ù†', 'Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù† Ø´Ø±Ù‚ÛŒ', 'Ø³ÛŒØ³ØªØ§Ù† Ùˆ Ø¨Ù„ÙˆÚ†Ø³ØªØ§Ù†', 'Ø®ÙˆØ²Ø³ØªØ§Ù†', 'Ø§Ù„Ø¨Ø±Ø²', 'Ù…Ø§Ø²Ù†Ø¯Ø±Ø§Ù†', 'Ú©Ø±Ù…Ø§Ù†Ø´Ø§Ù‡'];

    // --- Fake Data Generator ---
    const randomData = provinces.map(p => ({
      name: p,
      score: Math.floor(Math.random() * 30) + 60,
      delay: Math.floor(Math.random() * 40) + 10
    }));

    // KPI
    document.getElementById('avgScore').textContent = Math.round(randomData.reduce((a,b)=>a+b.score,0)/randomData.length);
    document.getElementById('warningCount').textContent = randomData.filter(x=>x.score<65).length;
    document.getElementById('topCount').textContent = randomData.filter(x=>x.score>80).length;

    // Alerts
    const alerts = [
      'Ø§Ø³ØªØ§Ù† Ø®ÙˆØ²Ø³ØªØ§Ù† Ø¨Ø§ Ø¨ÛŒØ´ØªØ±ÛŒÙ† ØªØ£Ø®ÛŒØ± Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²Ø³Ø§Ø²ÛŒ.',
      'Ø§Ø³ØªØ§Ù† ÙØ§Ø±Ø³ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ø¨Ø§Ø²Ø¨ÛŒÙ†ÛŒ Ø¯Ø± Ø±ÙˆÙ†Ø¯ ØªØ£Ù…ÛŒÙ† Ù…ØµØ§Ù„Ø­.',
      'Ø§Ø³ØªØ§Ù† Ø§Ù„Ø¨Ø±Ø² Ø¯Ø§Ø±Ø§ÛŒ Ø±Ø¶Ø§ÛŒØª Ø°ÛŒâ€ŒÙ†ÙØ¹Ø§Ù† Ú©Ù…ØªØ± Ø§Ø² Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†.',
      'Ø§Ø³ØªØ§Ù† ØªÙ‡Ø±Ø§Ù† Ù¾ÛŒØ´ØªØ§Ø² Ø¯Ø± ØªÙˆØ³Ø¹Ù‡ Ø´Ù‡Ø±ÛŒ.',
      'Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† ØªØ£Ø®ÛŒØ± Ú©Ø´ÙˆØ± Ú©Ù…ØªØ± Ø§Ø² Û³Û° Ø±ÙˆØ² Ø§Ø³Øª.'
    ];
    alerts.forEach(a=>{
      const li=document.createElement('li');
      li.innerHTML=a;
      document.getElementById('quickAlerts').appendChild(li);
    });

    // --- Bar Chart ---
    const barCtx = document.getElementById('barChart').getContext('2d');
    const barChart = new Chart(barCtx, {
      type: 'bar',
      data: {
        labels: provinces,
        datasets: [{
          label: 'Ø¯Ø±ØµØ¯ Ù¾ÛŒØ´Ø±ÙØª Ù¾Ø±ÙˆÚ˜Ù‡',
          data: randomData.map(d=>d.score),
          backgroundColor: chartColors.map(c=>c+'AA'),
          borderColor: chartColors,
          borderWidth: 1
        }]
      },
      options: {
        plugins: {
          legend: { display: false },
          datalabels: { color: '#334155', anchor: 'end', align: 'top', font: { weight: 'bold' }, formatter: v => v+'%' }
        },
        scales: {
          y: { beginAtZero: true, max: 100 }
        }
      }
    });

    // --- Delay Line Chart ---
    const delayCtx = document.getElementById('delayChart').getContext('2d');
    const delayChart = new Chart(delayCtx, {
      type: 'line',
      data: {
        labels: provinces,
        datasets: [{
          label: 'Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† ØªØ£Ø®ÛŒØ± (Ø±ÙˆØ²)',
          data: randomData.map(d=>d.delay),
          fill: true,
          backgroundColor: 'rgba(239,68,68,0.1)',
          borderColor: '#ef4444',
          tension: 0.3,
          pointRadius: 5,
          pointBackgroundColor: '#ef4444'
        }]
      },
      options: {
        plugins: { legend: { display: false } },
        scales: {
          y: { beginAtZero: true, title: { display: true, text: 'Ø±ÙˆØ²' } },
          x: { title: { display: true, text: 'Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§' } }
        }
      }
    });

    // --- Province Cards ---
    const container = document.getElementById('provinceCards');
    randomData.forEach(d=>{
      const div=document.createElement('div');
      div.className='card border-l-4 ' + (d.score>80?'border-emerald-500':d.score>65?'border-amber-400':'border-red-500');
      div.innerHTML=`
        <h3 class="font-bold text-lg mb-2 text-sky-800">${d.name}</h3>
        <div class="flex justify-between text-sm mb-2">
          <span>Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„:</span>
          <span class="font-bold">${d.score}</span>
        </div>
        <div class="progress-bar-container mb-2">
          <div class="progress-bar ${d.score>80?'bg-emerald-500':d.score>65?'bg-amber-400':'bg-red-500'}" style="width:${d.score}%"></div>
        </div>
        <div class="text-xs text-slate-500">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† ØªØ£Ø®ÛŒØ±: <b>${d.delay}</b> Ø±ÙˆØ²</div>
      `;
      container.appendChild(div);
    });
  </script>
</body>
</html>
